#{extends 'principal.html' /}
#{set title:'Formulario Internacao' /}

%{
	String tituloAcaoForm = internacao?.id == null? "Cadastrar":"Salvar Alterações"; 
	String tituloForm = internacao?.id == null? "Cadastro":"Edição";
}%

<meta charset="utf-8">
<div class="card mb-3">
	<div class="card-header">
		<i class="fa fa-table"></i> ${tituloForm} de Internação</div>
	<div class="card-body">
        
        <form action="@{Internacoes.salvar}" method="post">
			
			<input type="hidden" value="${internacao?.id}" name="internacao.id">
			
			<h6><b>Identificação do Paciente</b></h6>	
				<label for="pacientes">Selecione o paciente para adicionar:</label>
				<div class="input-group mb-3">
				
					
								
					<select id="paciente" name="internacao.paciente.id" class="form-control">  
					<option value="-1">Selecione um  paciente</option>
					   		#{list items:pacientes, as:'paciente'}
					   			<option type='hidden' value="${paciente.id}" name="paciente">${paciente.nome}</option>
					   		#{/list}
					</select>
					</div>
					
			<h6><b>Estado do Paciente</b></h6>					
				<div class="row">			
					<div class="form-group col-md-4">
					   	<label for="tipointernacao">Tipo da Internação:</label>
					   	<select class="form-control form-control-sm" id="tipointernacao" type="text" value="${internacao?.tipointernacao}" name="internacao.tipointernacao">
							<option>Selecione</option>
							<option value="LEVE">LEVE</option>
							<option value="MEDIA">MEDIA</option>
							<option value="GRAVE">GRAVE</option>
							<option value="GRAVISSIMA">GRAVISSIMA</option>
						</select>
					</div>					

					<div class="form-group col-md-2">
					   <label for="pressao">Pressão:</label>
					   <input class="form-control" id="pressao" placeholder="" type="text" value="${internacao?.pressao}" name="internacao.pressao">
					</div>
					
					<div class="form-group col-md-2">
					   <label for="temperatura">Temperatura:</label>
					   <input class="form-control" id="temperatura" placeholder="" type="text" value="${internacao?.temperatura}" name="internacao.temperatura">
					</div>
					
					<div class="form-group col-md-2">
					   <label for="peso">Peso:</label>
					   <input class="form-control" id="peso" placeholder="" type="text" value="${internacao?.peso}" name="internacao.peso">
					</div>
					
					<div class="form-group col-md-2">
					   <label for="altura">Altura:</label>
					   <input class="form-control" id="altura" placeholder="" type="text" value="${internacao?.altura}" name="internacao.altura">
					</div>
				</div>
				
				<div class="row">
					<div class="form-group col-md-12">
					   <label for="laudoMedico">Laudo Medico:</label>
					   <input class="form-control" id="laudoMedico" placeholder="" type="text" value="${internacao?.laudoMedico}" name="internacao.laudoMedico">
					</div>
				</div>
				
				<div class="row">
					<div class="form-group col-md-12">
					   <label for="infoComplementares">Informações Complementares:</label>
					   <textarea class="form-control" id="infoComplementares" rows="5"  value="${internacao?.infoComplementares}" name="internacao.infoComplementares">${internacao == null ? flash['internacao.infoComplementares'] : internacao.infoComplementares}</textarea>
					</div>
				</div>
				
				<h6><b>Identificação dos Responsavéis</b></h6>	
				<label for="medicos">Selecione o medico para adicionar:</label>
				<div class="input-group mb-3">
				
					<select id="medico" name="internacao.medico.id" class="form-control">
					<option value="-1">Selecione um  medico</option>  
					   		#{list items:medicos, as:'medico'}
					   			<option value="${medico.id}">${medico.nome}</option>
					   		#{/list}
					</select>
					</div>
				
					<label for="enfermeiros">Selecione o enfermeiro para adicionar:</label>
				<div class="input-group mb-3">
				
					<select id="enfermeiro" name="internacao.enfermeiro.id" class="form-control">  
					<option value="-1">Selecione um  enfermeiro</option>
					   		#{list items:enfermeiros, as:'enfermeiro'}
					   			<option value='${enfermeiro.id}'>${enfermeiro.nome}</option>
					   		#{/list}
					</select>
					</div>					
					

					<h6><b>Identificação do Setor Hospitalar</b></h6>	
					<label for="leitos">Selecione um leito para adicionar:</label>
					<div class="input-group mb-3">
					<select class="form-control" id="leito" name="internacao.leito.id">
					<option value="-1">Selecione um  leito</option>
						#{list items:leitos, as:'leito'}
					   			<option value="${leito.id}">${leito.numeroLeito}</option>
					   	#{/list}
					
					</select>
					</div>

			<div class="modal-footer">
				<input class="btn btn-success" type="submit" value="${tituloAcaoForm}">
				<button type="reset" class="btn btn-default" data-dismiss="modal">Limpar</button>
			</div>
		</form>
	</div>
</div>

<script>
$(document).ready(function(){
	$("#paciente option:first").attr('selected','selected'){
	});
}
</script>

<script>
$(document).ready(function(){
	$("#enfermeiro option:first").attr('selected','selected'){
	});
}
</script>

<script>
$(document).ready(function(){
	$("#medico option:first").attr('selected','selected'){
	});
}
</script>


<script>
$(document).ready(function(){
	$("#leito option:first").attr('selected','selected'){
	});
}
</script>


<script>
function mascara_peso() {
    var v = this.value, integer = v.split('.')[0];
//    v = v.replace(/\D/, "");
    v = v.replace(/\D/g, "");
    v = v.replace(/^[0]+/, "");
    if (v.length  200){
        v = ' ' + v[0]+v[1]+','+v[2];
    }

    this.value = v;
}

$(document).on('keyup', '#peso', mascara_peso);

});
</script>
